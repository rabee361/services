@model Ecommerce.Web.Models.CartViewModel
@{
    ViewData["Title"] = "Checkout";
}

<div class="container" style="padding: 3rem 0;">
    <h1 class="section-title" style="margin-top: 2rem;">Checkout</h1>

    <div class="checkout-layout">
        <!-- Left Side - Forms -->
        <div class="checkout-forms">
            <!-- Shipping Information -->
            <div class="checkout-section">
                <h2 class="checkout-section-title">Shipping Information</h2>
                <form class="checkout-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="firstName" class="form-label">First Name</label>
                            <input type="text" id="firstName" class="form-input" placeholder="John" required>
                        </div>
                        <div class="form-group">
                            <label for="lastName" class="form-label">Last Name</label>
                            <input type="text" id="lastName" class="form-input" placeholder="Doe" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="email" class="form-label">Email</label>
                        <input type="email" id="email" class="form-input" placeholder="john.doe@example.com" required>
                    </div>

                    <div class="form-group">
                        <label for="phone" class="form-label">Phone Number</label>
                        <input type="tel" id="phone" class="form-input" placeholder="+1 (555) 000-0000" required>
                    </div>

                    <div class="form-group">
                        <label for="address" class="form-label">Street Address</label>
                        <input type="text" id="address" class="form-input" placeholder="123 Main Street" required>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="city" class="form-label">City</label>
                            <input type="text" id="city" class="form-input" placeholder="New York" required>
                        </div>
                        <div class="form-group">
                            <label for="state" class="form-label">State</label>
                            <input type="text" id="state" class="form-input" placeholder="NY" required>
                        </div>
                        <div class="form-group">
                            <label for="zip" class="form-label">ZIP Code</label>
                            <input type="text" id="zip" class="form-input" placeholder="10001" required>
                        </div>
                    </div>
                </form>
            </div>

            <!-- Payment Information -->
            <div class="checkout-section">
                <h2 class="checkout-section-title">Payment Information</h2>
                <form class="checkout-form">
                    <div class="form-group">
                        <label for="cardName" class="form-label">Name on Card</label>
                        <input type="text" id="cardName" class="form-input" placeholder="John Doe" required>
                    </div>

                    <div class="form-group">
                        <label for="cardNumber" class="form-label">Card Number</label>
                        <input type="text" id="cardNumber" class="form-input" placeholder="1234 5678 9012 3456" required>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="expiry" class="form-label">Expiry Date</label>
                            <input type="text" id="expiry" class="form-input" placeholder="MM/YY" required>
                        </div>
                        <div class="form-group">
                            <label for="cvv" class="form-label">CVV</label>
                            <input type="text" id="cvv" class="form-input" placeholder="123" required>
                        </div>
                    </div>

                    <div class="payment-methods">
                        <span class="payment-method-icon">üí≥</span>
                        <span class="payment-method-icon">üîí</span>
                        <span style="color: var(--text-muted); font-size: 0.85rem;">Secure Payment</span>
                    </div>
                </form>
            </div>
        </div>

        <!-- Right Side - Order Summary -->
        <div class="checkout-summary">
            <h2 class="summary-title">Order Summary</h2>
            
            <!-- Order Items -->
            <div class="order-items">
                @foreach (var item in Model.Items)
                {
                    <div class="order-item">
                        <img src="@item.ImageUrl" alt="@item.ProductName" class="order-item-img">
                        <div class="order-item-info">
                            <p class="order-item-name">@item.ProductName</p>
                            <p class="order-item-quantity">Qty: @item.Quantity</p>
                        </div>
                        <p class="order-item-price">$@item.Subtotal.ToString("F2")</p>
                    </div>
                }
            </div>

            <div class="summary-divider"></div>

            <!-- Price Breakdown -->
            <div class="summary-row">
                <span>Subtotal</span>
                <span>$@Model.Subtotal.ToString("F2")</span>
            </div>
            
            <div class="summary-row">
                <span>Shipping</span>
                <span>@(Model.Shipping == 0 ? "FREE" : "$" + Model.Shipping.ToString("F2"))</span>
            </div>
            
            <div class="summary-row">
                <span>Tax</span>
                <span>$@Model.Tax.ToString("F2")</span>
            </div>
            
            <div class="summary-divider"></div>
            
            <div class="summary-row summary-total">
                <span>Total</span>
                <span>$@Model.Total.ToString("F2")</span>
            </div>

            <!-- Place Order Button -->
            <button type="submit" class="btn btn-primary" style="width: 100%; margin-top: 1.5rem;">
                Place Order
            </button>

            <!-- Back to Cart Link -->
            <a href="/Home/Cart" class="btn-secondary" style="display: block; text-align: center; margin-top: 1rem; color: var(--text-muted);">
                ‚Üê Back to Cart
            </a>

            <!-- Security Badge -->
            <div class="security-badge">
                <span>üîí</span>
                <span>Your information is secure and encrypted</span>
            </div>
        </div>
    </div>
</div>

<style>
    .checkout-layout {
        display: grid;
        grid-template-columns: 1fr 400px;
        gap: 2rem;
        margin-top: 2rem;
    }

    @@media (max-width: 968px) {
        .checkout-layout {
            grid-template-columns: 1fr;
        }
        
        .checkout-summary {
            order: -1;
        }
    }

    .checkout-forms {
        display: flex;
        flex-direction: column;
        gap: 2rem;
    }

    .checkout-section {
        background: var(--bg-card);
        border: 1px solid var(--border);
        border-radius: 1rem;
        padding: 2rem;
    }

    .checkout-section-title {
        font-size: 1.25rem;
        font-weight: 800;
        margin: 0 0 1.5rem 0;
    }

    .checkout-form {
        display: flex;
        flex-direction: column;
        gap: 1.25rem;
    }

    .form-row {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 1rem;
    }

    .form-group {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
    }

    .form-label {
        font-weight: 600;
        font-size: 0.9rem;
        color: var(--text-main);
    }

    .form-input {
        padding: 0.75rem 1rem;
        border: 1px solid var(--border);
        border-radius: 0.5rem;
        font-size: 1rem;
        background: var(--bg-main);
        color: var(--text-main);
        transition: var(--transition);
        font-family: inherit;
    }

    .form-input:focus {
        outline: none;
        border-color: var(--primary);
        box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
    }

    .form-input::placeholder {
        color: var(--text-muted);
    }

    .payment-methods {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        margin-top: 0.5rem;
        padding: 1rem;
        background: var(--bg-main);
        border-radius: 0.5rem;
    }

    .payment-method-icon {
        font-size: 1.5rem;
    }

    .checkout-summary {
        background: var(--bg-card);
        border: 1px solid var(--border);
        border-radius: 1rem;
        padding: 2rem;
        height: fit-content;
        position: sticky;
        top: 90px;
    }

    .summary-title {
        font-size: 1.5rem;
        font-weight: 800;
        margin: 0 0 1.5rem 0;
    }

    .order-items {
        display: flex;
        flex-direction: column;
        gap: 1rem;
        margin-bottom: 1rem;
    }

    .order-item {
        display: grid;
        grid-template-columns: 60px 1fr auto;
        gap: 1rem;
        align-items: center;
    }

    .order-item-img {
        width: 60px;
        height: 60px;
        border-radius: 0.5rem;
        object-fit: cover;
        background-color: #e2e8f0;
    }

    .order-item-info {
        display: flex;
        flex-direction: column;
        gap: 0.25rem;
    }

    .order-item-name {
        font-weight: 600;
        font-size: 0.9rem;
        margin: 0;
        line-height: 1.3;
    }

    .order-item-quantity {
        color: var(--text-muted);
        font-size: 0.8rem;
        margin: 0;
    }

    .order-item-price {
        font-weight: 700;
        margin: 0;
    }

    .summary-row {
        display: flex;
        justify-content: space-between;
        margin-bottom: 0.75rem;
        font-size: 0.95rem;
    }

    .summary-row span:last-child {
        font-weight: 600;
    }

    .summary-total {
        font-size: 1.25rem;
        font-weight: 800;
        color: var(--text-main);
        margin-top: 0.5rem;
    }

    .summary-divider {
        height: 1px;
        background: var(--border);
        margin: 1.25rem 0;
    }

    .btn-secondary {
        font-weight: 600;
        transition: var(--transition);
    }

    .btn-secondary:hover {
        color: var(--primary);
    }

    .security-badge {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        justify-content: center;
        margin-top: 1.5rem;
        padding: 0.75rem;
        background: var(--bg-main);
        border-radius: 0.5rem;
        font-size: 0.85rem;
        color: var(--text-muted);
    }

    .security-badge span:first-child {
        font-size: 1.25rem;
    }
</style>
